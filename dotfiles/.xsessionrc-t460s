#!/bin/bash
#
# ThinkPad T460s TrackPad/TrackPoint configuration
#
# Required package: xinput
#


# extract device id from xinput output
dev_id=""
function get_dev_id() {
    device_name="$1"
    s=$(xinput | grep "$device_name")
    s="${s#*id=}"
    dev_id="${s%%[!0-9]*}"
}


# TrackPoint
get_dev_id "TPPS/2 IBM TrackPoint"

xinput --set-prop --type=int --format=8 "$dev_id" "Evdev Wheel Emulation" 1
xinput --set-prop --type=int --format=8 "$dev_id" "Evdev Wheel Emulation Button" 2
xinput --set-prop --type=int --format=8 "$dev_id" "Evdev Wheel Emulation Axes" 6 7 4 5
xinput --set-prop --type=float "$dev_id" "Device Accel Constant Deceleration" 0.25
xinput --set-prop --type=float "$dev_id" "Device Accel Adaptive Deceleration" 1.0
xinput --set-prop --type=float "$dev_id" "Device Accel Velocity Scaling" 12.5


# TrackPad
get_dev_id "PS/2 Synaptics TouchPad"

# disable TrackPad if desired
xinput --set-prop --type=int "$dev_id" "Device Enabled" 0
