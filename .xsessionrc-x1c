#!/bin/bash
#
# .xsessionrc for ThinkPad X1 Carbon (2015)
#

set -xe

. .xsessionrc_helpers

# TrackPoint
dev_id=$(get_dev_id "TPPS/2 IBM TrackPoint")
if [[ -n "$dev_id" ]]; then
  xinput --set-prop --type=int --format=8 "$dev_id" "Evdev Wheel Emulation" 1
  xinput --set-prop --type=int --format=8 "$dev_id" "Evdev Wheel Emulation Button" 2
  xinput --set-prop --type=int --format=8 "$dev_id" "Evdev Wheel Emulation Timeout" 200
  xinput --set-prop --type=int --format=8 "$dev_id" "Evdev Wheel Emulation Axes" 6 7 4 5

  xinput --set-prop --type=int "$dev_id" "Evdev Wheel Emulation Inertia" 1
  xinput --set-prop --type=int "$dev_id" "Device Accel Profile" 2
  xinput --set-prop --type=float "$dev_id" "Device Accel Constant Deceleration" 0.250
  xinput --set-prop --type=float "$dev_id" "Device Accel Adaptive Deceleration" 1.0
  xinput --set-prop --type=float "$dev_id" "Device Accel Velocity Scaling" 10.0
fi

# TrackPad
dev_id=$(get_dev_id "PS/2 Synaptics TouchPad")
if [[ -n "$dev_id" ]]; then
  # disable TrackPad if desired
  xinput --set-prop --type=int "$dev_id" "Device Enabled" 0
fi
